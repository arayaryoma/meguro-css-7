<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"><meta name="theme-color" content="#3498db"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Chrome 78 Betaで試すCSS Properties and Values API</title><meta property="og:title" content="Chrome 78 Betaで試すCSS Properties and Values API"><meta property="og:type" content="article"><link href="vendor.7.00f6104cb994c5badc14.css" rel="stylesheet"><link href="main.4.a50a8b83caa4b4a51648.css" rel="stylesheet"></head><body><div id="root"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="btn-sidebar" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg><article id="webslides"><section class="aligncenter"><h1>Chrome 78 Betaで試すCSS Properties and Values API</h1><h4>Meguro.css #7 @ ラクスル</h4><h4>あらや @arayaryoma</h4></section><section class="aligncenter"><h2>自己紹介</h2><p><img src="e55c073e35750fa6f98d32bea46f0a0b.webp" alt="avatar"></p><ul><li>🙋‍♂️ あらや</li><li>🐦 Twitter: <a href="https://twitter.com/arayaryoma">@arayaryoma</a></li><li>💻 Web engineer at Hematite Inc.</li><li>❤️ Web standards, TypeScript, Go</li></ul></section><section class="aligncenter"><h2>CSS Properties and Values APIとは</h2><ul><li><a href="https://drafts.css-houdini.org/">CSS Houdini</a>の1つ</li><li>CSSのCustom Propertiesを構造化するためのAPI</li><li>CSSのCustom Propertyに初期値とsyntax(型のようなもの)を指定することができる</li><li><a href="https://blog.chromium.org/2019/09/chrome-78-beta-new-houdini-api-native.html">Chrome 78に搭載予定</a></li></ul></section><section class="aligncenter"><h2>API</h2><h4>使える関数は現在<code>window.CSS.registerProperty</code>のみ</h4><pre><code class="language-javascript">window.CSS.registerProperty({
  name: &#x27;--property-name&#x27;,  // 対象のcustom propertyの名前
  syntax: &#x27;*&#x27;,              // 値をどうパースするか
  inherits: true,           // 親要素の値を継承するか
  initialValue: &#x27;&#x27;,         // 初期値
});
</code></pre><h4>supported syntax</h4><p>syntaxに使える文字列は <a href="https://drafts.css-houdini.org/css-properties-values-api/#supported-names">draft</a> で定義されている。</p><ul><li><code>&lt;length&gt;</code></li><li><code>&lt;number&gt;</code></li><li><code>&lt;percentage&gt;</code></li><li><code>&lt;color&gt;</code></li><li><code>&lt;image&gt;</code></li><li>...など</li></ul></section><section class="aligncenter"><h3>一度registerしたpropertyはre-registerできない</h3><pre><code class="language-javascript">CSS.registerProperty({
    name: &#x27;--my-color&#x27;,
    inherits: false,
    initialValue: &#x27;#55CC55&#x27;,
    syntax: &#x27;&lt;color&gt;&#x27;
})

CSS.registerProperty({
    name: &#x27;--my-color&#x27;,
    inherits: false,
    initialValue: &#x27;black&#x27;,
    syntax: &#x27;&lt;color&gt;&#x27;
})
/*
Uncaught DOMException: Failed to execute &#x27;registerProperty&#x27; on &#x27;CSS&#x27;:
The name provided has already been registered.
*/
</code></pre></section><section class="aligncenter"><h3>呼び出し時にsyntaxに一致しない値を指定するとErrorが吐かれる</h3><pre><code class="language-javascript">CSS.registerProperty({
  name: &#x27;--box-color&#x27;,
  syntax: &#x27;&lt;url&gt;&#x27;,
  inherits: false,
  initialValue: &#x27;#FFFFFF&#x27;,
});
/*
Uncaught DOMException: Failed to execute &#x27;registerProperty&#x27; on &#x27;CSS&#x27;: 
The initial value provided does not parse for the given syntax.
*/
</code></pre></section><section class="aligncenter"><h2>Demo</h2><p><a href="https://playground.araya.dev/css-properties-and-values-api/">https://playground.araya.dev/css-properties-and-values-api/</a></p></section><section class="aligncenter"><h2>試用方法</h2><ul><li>Chrome: Beta, Dev, Canary channel</li><li>Safari: Technology PreviewでExperimental FeaturesからCSS Custom Properties and Values APIを有効にする<ul><li>ただ発表者が試したところ動かなかった</li></ul></li></ul></section><section class="aligncenter"><h2>各ブラウザの対応状況</h2><h3><a href="http://ishoudinireadyyet.com/">http://ishoudinireadyyet.com/</a></h3><p><img src="6bf6ffdbb55e3ef6a61d7c05c41c26f4.webp" alt="各ブラウザの対応状況"></p></section><section class="aligncenter"><h2>参考リンク集</h2><ul><li><a href="https://web.dev/css-props-and-vals/">https://web.dev/css-props-and-vals/</a></li><li><a href="https://drafts.css-houdini.org/css-properties-values-api/">https://drafts.css-houdini.org/css-properties-values-api/#supported-names</a></li><li><a href="http://ishoudinireadyyet.com/">http://ishoudinireadyyet.com/</a></li></ul></section></article></div><script type="text/javascript" src="runtime.816c3f4224223e7d1761.bundle.js"></script><script type="text/javascript" src="vendor.7.00f6104cb994c5badc14.bundle.js"></script><script type="text/javascript" src="main.4.a50a8b83caa4b4a51648.bundle.js"></script></body></html>